<section class="competition-join">
  <app-back-button></app-back-button>

  <h1>Unirse a un campeonato</h1>

  <form class="filters" (ngSubmit)="search()">
    <input type="text" placeholder="Nombre del campeonato" [(ngModel)]="filters.name" name="name" />

    <select [(ngModel)]="filters.sport" name="sport">
      <option value="">Deporte</option>
      <option value="football">Fútbol</option>
      <option value="basket">Baloncesto</option>
      <option value="tennis">Tenis</option>
      <option value="padel">Pádel</option>
    </select>

    <select [(ngModel)]="filters.type" name="type">
      <option value="">Tipo</option>
      <option value="league">Liga</option>
      <option value="tournament">Torneo</option>
    </select>

    <select [(ngModel)]="filters.level" name="level">
      <option value="">Nivel</option>
      <option value="beginner">Iniciación</option>
      <option value="intermediate">Intermedio</option>
      <option value="advanced">Avanzado</option>
    </select>

    <input type="text" placeholder="Centro deportivo" [(ngModel)]="filters.center" name="center" />

    <button type="submit">Buscar</button>
  </form>

  <div class="results" *ngIf="results.length">
    <h2>Resultados</h2>
    <ul>
      <li *ngFor="let c of results">
        <div class="competition">
          <app-competition-card [competition]="c"></app-competition-card>
          <div class="actions">
            <input *ngIf="c.is_private"
                   class="code-input"
                   [attr.name]="'code-'+c.id"
                   [(ngModel)]="accessCodes[c.id]"
                   maxlength="6"
                   inputmode="numeric"
                   pattern="\\d{6}"
                   placeholder="Código (6)" />
            <button class="" [disabled]="!c.is_open" (click)="requestJoin(c)">
              {{ c.is_open ? (c.is_private ? 'Solicitar con código' : 'Solicitar inscripción') : 'Inscripción cerrada' }}
            </button>
          </div>
        </div>
      </li>
    </ul>
  </div>

  <p class="empty" *ngIf="!results.length">Usa los filtros para encontrar un campeonato.</p>
</section>
